<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise</title>
</head>
<body>
<script type="text/javascript" charset="UTF-8">
    //在JavaScript的世界中，所有代码都是单线程执行的
    //由于这个“缺陷”，导致JavaScript的所有网络操作，浏览器事件，都必须是异步执行
    /*function callback(){
        console.log("Done");
    }
    console.log("before setTimeout()");
    setTimeout(callback,1000);//1秒钟后调用callback函数
    console.log("after setTimemout()");*/
    //可见,异步操作会在将来的某个时间点触发一个函数的回调

    /*"use strict";
    new Promise(function(){});
    alert("支持Promise");*/

    var p1 = new Promise(function (resolve, reject) {
        setTimeout(resolve, 500, 'P1');
    });
    var p2 = new Promise(function (resolve, reject) {
        setTimeout(resolve, 600, 'P2');
    });
    Promise.race([p1, p2]).then(function (result) {
        console.log(result); // 'P1'
    });

    var p1 = new Promise(function (resolve, reject) {
        setTimeout(resolve, 500, 'P1');
    });
    var p2 = new Promise(function (resolve, reject) {
        setTimeout(resolve, 600, 'P2');
    });
    // 同时执行p1和p2，并在它们都完成后执行then:
    Promise.all([p1, p2]).then(function (results) {
        console.log(results); // 获得一个Array: ['P1', 'P2']
    });

    //https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise
</script>
</body>
</html>
